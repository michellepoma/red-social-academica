<div class="home-layout">
  <!-- Barra lateral izquierda -->
  <aside class="sidebar">
    <h3>Menú</h3>
    <p class="username">{{ usuario?.username }}</p>
    <p class="email">{{ usuario?.email }}</p>

    <nav class="menu">
      <button (click)="verSeccion('amigos')">👥 Amigos</button>
      <button (click)="verSeccion('buscar')">🔍 Buscar</button>
      <button (click)="verSeccion('invitaciones')">📨 Invitaciones</button>
      <button (click)="verSeccion('notificaciones')">🔔 Notificaciones</button>
    </nav>

    <hr>

    <button class="btn-rojo" (click)="darDeBaja()">Dar de baja</button>
    <button class="btn-negro" (click)="logout()">Cerrar sesión</button>
  </aside>

  <!-- Contenido principal -->
  <main class="contenido">
    <h2>Bienvenido, {{ usuario?.username }}</h2>

    <!-- Sección de Amigos -->
    <section *ngIf="seccion === 'amigos'">
      <h3>Amigos</h3>
      <ul>
        <li *ngFor="let amigo of amigos">
          {{ amigo.username }} ({{ amigo.email }})
        </li>
      </ul>
    </section>

    <!-- Sección de Búsqueda de usuarios -->
    <section *ngIf="seccion === 'buscar'">
      <h3>Buscar usuario</h3>
      <div class="buscar-usuario">
        <input [(ngModel)]="busquedaUsername" placeholder="Username a buscar" />
        <button class="btn" (click)="buscarUsuario()">Buscar</button>
      </div>

      <div *ngIf="resultadoBusqueda">
        <p><strong>{{ resultadoBusqueda.username }}</strong> ({{ resultadoBusqueda.email }})</p>
        <button class="btn btn-verde" (click)="enviarInvitacion(resultadoBusqueda.username)">
          Enviar invitación
        </button>
      </div>

      <p *ngIf="busquedaFallida" class="error">Usuario no encontrado.</p>
    </section>

    <!-- Sección de Invitaciones -->
    <section *ngIf="seccion === 'invitaciones'">
      <h3>Invitaciones pendientes</h3>
      <ul *ngIf="invitaciones.length > 0; else sinInv">
        <li *ngFor="let inv of invitaciones">
          <strong>{{ inv.senderUsername }}</strong> te ha enviado una invitación.
          <button (click)="aceptarInvitacion(inv.id)">Aceptar</button>
        </li>
      </ul>
      <ng-template #sinInv>
        <p>No tienes invitaciones pendientes.</p>
      </ng-template>
    </section>

    <!-- Sección de Notificaciones -->
    <section *ngIf="seccion === 'notificaciones'">
      <h3>Notificaciones</h3>
      <p>(Aquí puedes mostrar notificaciones futuras)</p>
    </section>
  </main>
</div>
