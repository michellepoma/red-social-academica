<div class="home-layout">
  <aside class="sidebar">
    <h3>Men칰</h3>
    <p class="username">{{ usuario?.username }}</p>
    <p class="email">{{ usuario?.email }}</p>

    <nav class="menu">
      <button (click)="verSeccion('buscar')">游댌 Buscar</button>
      <button (click)="verSeccion('amigos')">游논 Amigos</button>
      <button (click)="verSeccion('publicaciones')">游닇 Publicaciones</button>
      <button (click)="verSeccion('comentarios')">游닋 Mis comentarios</button>
      <button (click)="verSeccion('invitaciones')">游닏 Invitaciones</button>
      <button (click)="verSeccion('notificaciones')">游댒 Notificaciones</button>
    </nav>

    <hr>
    <button class="btn-rojo" (click)="darDeBaja()">Dar de baja</button>
    <button class="btn-negro" (click)="logout()">Cerrar sesi칩n</button>
  </aside>

  <main class="contenido">
    <h2>Bienvenido, {{ usuario?.username }}</h2>

    <!-- Amigos -->
    <section *ngIf="seccion === 'amigos'">
      <h3>Amigos</h3>
      <ul>
        <li *ngFor="let amigo of amigos">
          {{ amigo.username }} ({{ amigo.email }})
        </li>
      </ul>
    </section>

    <!-- Buscar -->
    <section *ngIf="seccion === 'buscar'">
      <h3>Buscar usuario</h3>
      <input [(ngModel)]="busquedaUsername" placeholder="Username a buscar" />
      <button (click)="buscarUsuario()">Buscar</button>

      <div *ngIf="resultadoBusqueda">
        <p><strong>{{ resultadoBusqueda.username }}</strong> ({{ resultadoBusqueda.email }})</p>
        <button (click)="enviarInvitacion(resultadoBusqueda.username)">
          Enviar invitaci칩n
        </button>
      </div>

      <p *ngIf="busquedaFallida" class="error">Usuario no encontrado.</p>
    </section>

    <!-- Invitaciones -->
    <section *ngIf="seccion === 'invitaciones'">
      <h3>Invitaciones pendientes</h3>
      <ul *ngIf="invitaciones.length > 0; else sinInv">
        <li *ngFor="let inv of invitaciones">
          <strong>{{ inv.senderName || inv.senderUsername }}</strong> te ha enviado una invitaci칩n.
          <button (click)="aceptarInvitacion(inv.id)">Aceptar</button>
          <button (click)="rechazarInvitacion(inv.id)">Rechazar</button>
        </li>
      </ul>
      <ng-template #sinInv>
        <p>No tienes invitaciones pendientes.</p>
      </ng-template>
    </section>

    <!-- Notificaciones -->
    <section *ngIf="seccion === 'notificaciones'">
      <h3>Notificaciones</h3>
      <p>(Aqu칤 puedes mostrar notificaciones futuras)</p>
    </section>
  </main>
</div>
