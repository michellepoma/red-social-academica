<div class="container mt-4">
  <h2 class="mb-3" style="font-size: 1.8rem; display: flex; align-items: center; gap: 0.5rem;">
    <span>üîç</span> Buscar Usuarios
  </h2>

  <div class="form-group d-flex gap-2 mb-4">
    <input [(ngModel)]="textoBusqueda" placeholder="Ingrese nombre, email o estado (activo/inactivo)"
      class="form-control" />
    <button (click)="buscar()" class="btn btn-primary">Buscar</button>
    <button (click)="limpiarBusqueda()" class="btn btn-secondary" *ngIf="textoBusqueda.trim()">Limpiar</button>
  </div>

  <div *ngIf="mensaje" class="alert alert-info">{{ mensaje }}</div>

  <div *ngIf="usuarios.length > 0">
    <table class="table table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>Nombre</th>
          <th>Usuario</th>
          <th>Email</th>
          <th>Rol</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let usuario of usuarios">
          <td>{{ (usuario.name || '') + ' ' + (usuario.lastName || '') }}</td>
          <td>{{ usuario.username }}</td>
          <td>{{ usuario.email }}</td>
          <td>{{ usuario.roles?.[0] || 'Sin rol' }}</td>
          <td>
            <span [style.color]="usuario.activo ? 'green' : 'red'">
              {{ usuario.activo ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td>
            <a [routerLink]="['/admin/usuarios/perfil', usuario.username]" class="btn btn-sm me-2"
              [ngClass]="usuario.activo ? 'btn-info' : 'btn-inactivo'" [class.disabled]="!usuario.activo" tabindex="-1"
              [attr.aria-disabled]="!usuario.activo" (click)="usuario.activo ? null : $event.preventDefault()">
              üëÅ Ver
            </a>

            <a [routerLink]="['/admin/usuarios/editar', usuario.username]" class="btn btn-sm me-2"
              [ngClass]="usuario.activo ? 'btn-warning' : 'btn-inactivo'" [class.disabled]="!usuario.activo"
              tabindex="-1" [attr.aria-disabled]="!usuario.activo"
              (click)="usuario.activo ? null : $event.preventDefault()">
              ‚úèÔ∏è Editar
            </a>

            <button (click)="darDeBaja(usuario.username)" [disabled]="!usuario.activo"
              [ngClass]="usuario.activo ? 'btn-baja' : 'btn-inactivo'" class="btn btn-sm">
              {{ usuario.activo ? '‚ùå Baja' : 'Inactivo' }}
            </button>
          </td>

        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-between align-items-center mt-3">
      <button (click)="anteriorPagina()" [disabled]="paginaActual === 0" class="btn btn-outline-secondary">‚¨Ö
        Anterior</button>
      <span><strong>P√°gina {{ paginaActual + 1 }} de {{ totalPaginas }}</strong></span>
      <button (click)="siguientePagina()" [disabled]="paginaActual + 1 >= totalPaginas"
        class="btn btn-outline-secondary">Siguiente ‚û°</button>
    </div>
  </div>
</div>